# 排行榜功能实现说明

## 功能概述

排行榜页面展示了网易云音乐的特色榜单，包括官方榜和特色榜两个部分。

## 榜单列表

### 官方榜（4个）
- **飙升榜** (ID: 19723756) - 每日更新
- **新歌榜** (ID: 3779629) - 每日更新
- **原创榜** (ID: 2884035) - 每周更新
- **热歌榜** (ID: 3778678) - 每日更新

### 特色榜（4个）
- **古典音乐榜** (ID: 71384707)
- **电音榜** (ID: 1978921795)
- **全球说唱榜** (ID: 14028249541)
- **日本Oricon榜** (ID: 60131)

## 技术实现

### 1. API调用
使用已有的 `getPlaylistDetail(id)` 接口获取榜单详情：
```javascript
// 从 utils/api.js 导入
import { getPlaylistDetail } from '@/utils/api.js'

// 获取榜单详情
const res = await getPlaylistDetail(rankingId)
```

### 2. 数据结构

#### 官方榜单数据结构
```javascript
{
  id: 19723756,           // 榜单ID
  name: '飙升榜',         // 榜单名称
  description: '...',     // 榜单描述
  updateFrequency: '每日更新', // 更新频率
  cover: '',              // 封面图片
  topSongs: [             // 前3首歌曲
    {
      name: '歌曲名',
      artist: '歌手名'
    }
  ]
}
```

#### 特色榜单数据结构
```javascript
{
  id: 71384707,          // 榜单ID
  name: '古典音乐榜',     // 榜单名称
  description: '...',     // 榜单描述
  cover: '',              // 封面图片
  playCount: 0            // 播放次数
}
```

### 3. 页面布局

#### 官方榜布局
- 横向卡片布局
- 显示榜单封面（200rpx x 200rpx）
- 显示榜单名称、描述、更新频率
- 显示前3首歌曲预览
- 右上角显示彩色徽章

#### 特色榜布局
- 2列网格布局
- 显示榜单封面（方形）
- 显示播放次数
- 显示榜单名称

### 4. 页面交互

#### 数据加载
```javascript
async loadRankingData() {
  // 并行加载所有榜单
  const allRankings = [...this.officialRankings, ...this.specialRankings]
  const promises = allRankings.map(rank => this.loadRankingDetail(rank.id))
  const results = await Promise.all(promises)
  
  // 更新数据
  // ...
}
```

#### 跳转详情
点击任一榜单卡片，跳转到歌单详情页面：
```javascript
goToRankDetail(rank) {
  uni.navigateTo({
    url: `/pages/playlist-detail/playlist-detail?id=${rank.id}`
  })
}
```

### 5. UI设计

#### 渐变背景
- 顶部使用紫色渐变 (#667eea)
- 底部过渡到灰色背景 (#f5f5f5)

#### 官方榜徽章
不同榜单使用不同渐变色：
1. 飙升榜：紫色 (#667eea → #764ba2)
2. 新歌榜：粉色 (#f093fb → #f5576c)
3. 原创榜：蓝色 (#4facfe → #00f2fe)
4. 热歌榜：绿色 (#43e97b → #38f9d7)

#### 卡片阴影
```css
box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.08);
```

#### 交互动画
```css
.ranking-item:active {
  transform: scale(0.98);
}
```

## 页面文件位置

- **页面文件**：`pages/ranking/ranking.vue`
- **路由配置**：已在 `pages.json` 中注册
- **入口位置**：发现页 → 排行榜快捷入口

## API 数据格式

### 歌单详情接口返回
```json
{
  "code": 200,
  "result": {
    "id": 3779629,
    "name": "新歌榜",
    "coverImgUrl": "https://...",
    "playCount": 1234567890,
    "description": "...",
    "tracks": [
      {
        "id": 12345,
        "name": "歌曲名",
        "artists": [
          {
            "name": "歌手名"
          }
        ]
      }
    ]
  }
}
```

## 特性

1. **并行加载**：所有榜单数据并行请求，提高加载速度
2. **容错处理**：单个榜单加载失败不影响其他榜单
3. **数据预览**：官方榜显示前3首歌曲预览
4. **播放量格式化**：自动格式化为万、亿等单位
5. **响应式设计**：适配不同屏幕尺寸

## 后续优化建议

1. **缓存优化**：可以添加榜单数据缓存，减少重复请求
2. **下拉刷新**：添加下拉刷新功能，更新榜单数据
3. **骨架屏**：添加加载占位符，优化用户体验
4. **动画效果**：添加榜单卡片入场动画
5. **榜单扩展**：可以添加更多国际榜单（如Billboard、UK榜等）
