# 网易云音乐搜索下载器 - UI界面版

## 功能特性

### 1. 歌曲搜索
- 输入歌曲名称进行搜索
- 显示前10个搜索结果
- 展示歌曲名、歌手、专辑等信息

### 2. 音乐下载
- 选择歌曲并点击下载按钮
- 支持双击歌曲快速下载
- 自定义保存位置
- 实时显示下载进度

### 3. 歌词下载 🆕
- **同时下载LRC和TXT格式歌词**
- LRC格式：带时间轴，可在播放器中同步显示
- TXT格式：纯文本，方便阅读
- 自动识别并保存双语歌词
- 可选择是否下载歌词（默认启用）
- 歌词文件自动保存到与音乐文件相同的目录

### 4. API信息展示
- **API调用信息窗口**：显示完整的API请求详情
  - 请求方法和地址
  - 请求参数
  - 请求头信息
  - 响应数据
  
- **URL解析窗口**：显示每首歌曲的下载URL构成
  - 歌曲ID
  - 完整下载URL
  - URL组成说明

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行程序

```bash
python music_search_ui.py
```

## 使用说明

1. **搜索歌曲**
   - 在顶部输入框输入歌曲名称
   - 点击"搜索"按钮或按Enter键
   - 等待搜索结果显示在左侧表格中

2. **查看API信息**
   - 搜索后，右侧窗口会显示详细的API调用信息
   - 包括请求URL、参数、响应数据等
   - URL解析窗口展示每首歌曲的下载链接构成

3. **选择歌词下载** 🆕
   - 在搜索结果下方，勾选或取消"同时下载歌词（LRC + TXT）"
   - 默认已勾选，推荐保持启用
   - 纯音乐如果没有歌词也不影响音乐下载

4. **下载歌曲和歌词**
   - 在搜索结果中选择一首歌曲
   - 点击"下载选中的歌曲"按钮，或直接双击歌曲
   - 选择保存位置和文件名
   - 等待下载完成（先下载音乐，再下载歌词）
   - 下载完成后会显示保存的文件信息

## 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  歌曲名称: [输入框]  [搜索]                               │
├──────────────────────┬─────────────────────────────────┤
│  搜索结果            │  API调用信息                      │
│  ┌─────────────────┐│  ┌────────────────────────────┐ │
│  │序号 歌曲名 歌手  ││  │API请求详情                  │ │
│  │1.   歌曲1  歌手1││  │- 请求方法: GET             │ │
│  │2.   歌曲2  歌手2││  │- API地址: ...              │ │
│  │...              ││  │- 参数: ...                 │ │
│  └─────────────────┘│  └────────────────────────────┘ │
│  ☑ 同时下载歌词     │  ┌────────────────────────────┐ │
│     (LRC + TXT) 🆕  │  │URL解析详情                  │ │
│  [下载选中的歌曲]    │  │1. 歌曲名 - 歌手            │ │
│                      │  │   歌曲ID: 123456           │ │
│                      │  │   下载URL: http://...      │ │
│                      │  │   URL组成说明: ...         │ │
│                      │  └────────────────────────────┘ │
├──────────────────────┴─────────────────────────────────┤
│  状态: 就绪                                              │
└─────────────────────────────────────────────────────────┘
```

## 技术说明

### API接口
- **搜索API**: `http://music.163.com/api/search/get/web`
- **音乐下载URL**: `http://music.163.com/song/media/outer/url?id={song_id}.mp3`
- **歌词API** 🆕: `http://music.163.com/api/song/lyric`

### 实现特点
- 使用tkinter构建图形界面
- 多线程处理网络请求，避免界面卡顿
- 实时显示API调用和URL解析信息
- 支持自定义保存位置
- 下载进度实时反馈
- **多格式歌词下载** 🆕：LRC（带时间轴）和TXT（纯文本）
- **智能文件管理** 🆕：歌词自动保存到音乐文件同目录
- **双语歌词识别** 🆕：自动识别并保存翻译版本

## 注意事项

1. 部分歌曲可能需要VIP会员权限才能下载
2. 下载速度取决于网络状况
3. 请遵守相关版权法规，仅供个人学习使用
4. 建议使用稳定的网络环境
5. 🆕 **歌词说明**：
   - 纯音乐通常没有歌词，属于正常情况
   - LRC文件需要配合支持的播放器使用
   - 歌词文件使用UTF-8编码保存

## 下载文件说明 🆕

下载完成后，会在你选择的目录中生成：

```
保存目录/
  ├── 歌曲名 - 歌手.mp3          # 音乐文件
  ├── 歌曲名 - 歌手.lrc          # LRC歌词（带时间轴）
  ├── 歌曲名 - 歌手.txt          # TXT歌词（纯文本）
  └── 歌曲名 - 歌手_双语.txt     # 双语歌词（如果有翻译）
```

## 依赖库

- **requests**: HTTP请求库，用于API调用和文件下载
- **tkinter**: Python内置GUI库，无需额外安装

## 常见问题

**Q: 搜索不到歌曲？**  
A: 请检查网络连接，或尝试更换搜索关键词

**Q: 下载失败？**  
A: 可能是该歌曲需要VIP权限，或网络连接问题

**Q: 下载的文件很小？**  
A: 如果文件小于1KB，说明下载失败，可能是VIP歌曲或链接失效

**Q: 为什么有些歌曲没有歌词？** 🆕  
A: 纯音乐、部分老歌或小众歌曲可能没有歌词数据，不影响音乐下载

**Q: LRC文件如何使用？** 🆕  
A: LRC文件是带时间轴的歌词，可在支持的播放器中使用（如网易云音乐、Foobar2000等），将LRC和MP3文件放在同一目录即可

## 相关文档

- 📖 [详细使用指南](使用指南.md) - 完整的功能说明和使用技巧
- 🆕 [v2.0更新说明](更新说明_v2.0.md) - 歌词下载功能详细介绍
- 🧪 [测试歌词功能](测试歌词功能.py) - 歌词API测试脚本

